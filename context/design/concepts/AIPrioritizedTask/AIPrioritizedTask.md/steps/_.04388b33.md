---
timestamp: 'Thu Oct 23 2025 01:49:40 GMT-0400 (Eastern Daylight Time)'
parent: '[[../20251023_014940.d01591a0.md]]'
content_id: 04388b3357cc8af4e717c7e3983882000f861a43631b61d048d1075ea068d38f
---

# Revised Concept Specification

**concept** AIPrioritizedTask \[User]

**purpose** Compute personalized priority scores using LLM-inferred task attributes while preserving all original Task functionality

**principle** Tasks are created and managed identically to the original Task concept; Priority calculation is enhanced by LLM inference of effort, importance, and difficulty; If LLM inference fails validation, system falls back to time-based priority

**state**
`a set of Tasks with`
`owner: User`
`name: String`
`description: String`
`dueDate: Time`
`completed: Boolean`
`overdue: Boolean`
`inferredEffortHours: Number?` // LLM-inferred (0.5 to 40 hours), optional, validated
`inferredImportance: Number?` // LLM-inferred (1-10), optional, validated
`inferredDifficulty: Number?` // LLM-inferred (1-10), optional, validated
`priorityScore: Number` // Calculated value, higher is more urgent
`lastPriorityCalculationTime: Time?` // Timestamp of the last successful priority calculation using LLM or fallback

`invariants`
`each task name is unique per owner`
`inferredEffortHours is between 0.5 and 40 when present`
`inferredImportance is between 1 and 10 when present`
`inferredDifficulty is between 1 and 10 when present`
`priorityScore is 0 when completed is true`
`overdue is true if current time > dueDate and completed is false, and false otherwise` // System-maintained derived state

**actions**

`createTask (owner: User, name: String, description: String, dueDate: Time): (task: Task)`
**requires** `name` is non-empty and unique for the `owner`, `dueDate` is valid.
**effects**
`adds fresh task with owner, name, description, and dueDate`
`sets completed to false, overdue to false`
`sets all inferred attributes to null initially`
`sets priorityScore to an initial time-based value (e.g., higher for closer dueDate)`
`sets lastPriorityCalculationTime to null`
`triggers system calculateTaskPriority for the new task`
`returns the task`

`updateTask (task: Task, newName: String?, newDescription: String?, newDueDate: Time?): (task: Task)`
**requires** `task` exists. If `newName` is provided, it is non-empty and unique for `task.owner` (excluding the current `task`). If `newDueDate` is provided, it is valid.
**effects**
`if newName is provided, updates task.name to newName`
`if newDescription is provided, updates task.description to newDescription`
`if newDueDate is provided, updates task.dueDate to newDueDate`
`if task.dueDate was changed, sets task.overdue to false`
`triggers system calculateTaskPriority for the task`
`returns the updated task`

`snoozeTask (task: Task, newDueDate: Time): (task: Task)`
**requires** `task` exists and `newDueDate` is in the future relative to the current time.
**effects**
`updates task.dueDate to newDueDate`
`sets task.overdue to false`
`triggers system calculateTaskPriority for the task`
`returns updated task`

`completeTask (task: Task): (task: Task)`
**requires** `task` exists
**effects**
`sets task.completed to true`
`sets task.priorityScore to 0`
`clears all AI-inferred attributes (inferredEffortHours, inferredImportance, inferredDifficulty)`
`returns updated task`

**system** `markOverdue (task: Task)`
**requires** `task` exists, `task.completed` is false, `current time > task.dueDate`, and `task.overdue` is false.
**effects**
`sets task.overdue to true`
`triggers system calculateTaskPriority for the task`

**system** `calculateTaskPriority (task: Task)`
**requires** `task` exists, `task.completed` is false.
**effects**
`attempts to call an internal LLM service to infer effort (hours), importance (1-10), difficulty (1-10) from task.name and task.description`
`validates all three attributes based on their specified ranges`
`if LLM inference is successful and validation passes:`
`updates task.inferredEffortHours, task.inferredImportance, task.inferredDifficulty`
`calculates and updates task.priorityScore combining time urgency with weighted LLM attributes (e.g., importance 50%, difficulty 30%, effort 20%)`
`else (if LLM inference fails or validation fails):`
`sets inferredEffortHours, inferredImportance, inferredDifficulty to null`
`calculates and updates task.priorityScore based solely on time urgency (dueDate and overdue status)`
`sets task.lastPriorityCalculationTime to the current time`
